<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photos</title>

    <link rel="stylesheet" href="/build/gl.css">
    <script defer src="/build/gl.js"></script>

    <style>:root { --font-icons: "Material Icons Outlined"; }</style>
</head>
<body data-theme="auto">

    <header class="top-app-bar fixed hide-preview">
        <div class="wrapper">
            <div class="left">
                <button class="btn icon ripple js-drawer-trigger" icon="menu"></button>
                <span class="brand">Photos</span>
            </div>
            <div class="search-bar">
                <a class="btn icon left"><i class="material-icons">search</i></a>
                <input type="search" placeholder='Search "Sunrise"'>
            </div>
            <div class="toolbar">
                <button class="btn js-menu-trigger" title="import photos" data-menu="m-upload"><i class="material-icons">file_upload</i> Import</button>
                <div id="m-upload" class="js-menu top-right icons">
                    <div class="ma">
                        <small>Import from</small>
                    </div>
                    <a href="#!"><i class="material-icons">laptop_chromebook</i> Computer</a>
                    <a href="#!"><i class="material-icons">cloud</i> Cloud storage</a>
                    <ul class="list">
                        <li class="button">
                            <div class="content">
                                <img src="http://www.icons101.com/icons/47/Icons_Material_Design_by_Rammist/128/cloud.png" alt="" class="avatar">
                                <div class="text">
                                    <span class="first">Download save and sync</span>
                                    <span class="second">Automatically save photos from your PC or Mac</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <button class="btn icon" icon="help_outline"></button>
                <button class="btn icon" icon="settings"></button>
            </div>
        </div>
    </header>

    <aside class="drawer small-tabs hide-preview">
        <div role="button" class="item active">
            <i class="material-icons">insert_photo</i>
            <span>Photos</span>
        </div>
        <div role="button" class="item">
            <i class="material-icons">mode_comment</i>
            <span>Sharing</span>
        </div>
        <div role="button" class="item">
            <i class="material-icons">auto_stories</i>
            <span>Photo Books</span>
        </div>
    </aside>
    <div class="drawer-backdrop js-drawer-closable"></div>

    <main class="hide-preview">
        <div class="gallery" id="gallery"></div>
        <div class="js-circular-loader"></div>
    </main>

    <aside id="show-preview" class="animated">
        <aside class="panel right close" style="height:100vh">
            <header class="top-app-bar">
                <div class="wrapper">
                    <div class="left">
                        <button class="btn icon js-hide-panel contextual" icon="close"></button>
                        <span class="text">Infos</span>
                    </div>
                </div>
            </header>
            <div class="text-field">
                <input type="text" placeholder=" ">
                <label>Description</label>
            </div>
            <ul class="list">
                <li>
                    <div class="content">
                        <i class="avatar material-icons">insert_photo</i>
                        <div class="text">
                            <span class="main">test</span>
                        </div>
                    </div>
                </li>
            </ul>
            <div style="width: 100%;position:absolute;bottom:0"><iframe width="100%" height="150" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?width=100%25&amp;height=600&amp;hl=en&amp;q=1%20Grafton%20Street,%20Dublin,%20Ireland+(My%20Business%20Name)&amp;t=&amp;z=14&amp;ie=UTF8&amp;iwloc=B&amp;output=embed"></iframe></div>
        </aside>
        <div class="panel-app-content">
            <header class="top-app-bar fixed transparent">
                <div class="wrapper">
                    <div class="left">
                        <button class="btn icon" onclick="backHome()" icon="arrow_back"></button>
                    </div>
                    <div class="right">
                        <button class="btn icon js-modal-trigger" data-modal="modal-share" icon="share"></button>
                        <button class="btn icon js-show-panel" icon="info"></button>
                        <button class="btn icon js-menu-trigger" data-menu="m1" icon="more_vert"></button>
                        <div class="js-menu top-right" id="m1">
                            <a target="_blank" href="https://github.com/arnoclr/gl-css/issues/new" tabindex="0">Report issue</a>
                            <a target="_blank" href="https://github.com/arnoclr/gl-css" tabindex="0">Github</a>
                        </div>
                    </div>
                </div>
            </header>
            <div class="media-preview">
                <img id="img">
                <div id="img-spinner" class="js-circular-loader"></div>
            </div>
        </div>
    </aside>

    <aside class="js-modal js-modal-closable" id="modal-share">
        <div class="content">
            <div class="header">
                <span>Send in photo app</span>
                <button class="btn icon js-modal-close" icon="close"></button>
            </div>
            <div class="body">
                <input type="text" placeholder="Share with" class="no-border">
                <ul class="list">
                    <li>
                        <div class="content">
                            <i class="avatar outlined material-icons">group_add</i>
                            <div class="text">
                                <span class="main">New group</span>
                            </div>
                        </div>
                    </li>
                    <small>suggestions</small>
                    <li>
                        <div class="content">
                            <img src="https://picsum.photos/40" alt="" class="avatar">
                            <div class="text">
                                <span class="main">John Doe</span>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="content">
                            <img src="https://picsum.photos/41" alt="" class="avatar">
                            <div class="text">
                                <span class="main">Ali Conors</span>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="content">
                            <img src="https://picsum.photos/42" alt="" class="avatar">
                            <div class="text">
                                <span class="main">Juan Sebastian</span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="actions">
                <div class="buttons">
                    <div class="btn labeled">
                        <button class="btn icon" icon="link"></button>
                        <span>Create link</span>
                    </div>
                    <div class="btn labeled">
                        <button class="btn icon" icon="facebook"></button>
                        <span>Facebook</span>
                    </div>
                    <div class="btn labeled">
                        <button class="btn icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
                        </button>
                        <span>Twitter</span>
                    </div>
                </div>
            </div>
        </div>
    </aside>

    <script>
        const cities = ['Paris', 'Barcelona', 'Miami', 'Roma', 'Lisboa', 'London', 'Berlin', 'Praha', 'Belgrade']
        const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
        const rows = getRndInteger(2, 5)
        const gallery = document.getElementById('gallery')

        for (let x = 0; x <= rows; x++) {
            appendImgs()
        }

        function getRndInteger(min, max) {
            return Math.floor(Math.random() * (max - min + 1) ) + min;
        }

        function appendImgs() {
            var number = getRndInteger(1, 12)
            var photos = ''
            var day = ''
            var city = ''
            for (let y = 0; y <= number; y++) {
                day = days[Math.floor(Math.random() * days.length)]
                city = cities[Math.floor(Math.random() * cities.length)]
                switch (y) {
                    case 0:
                        photos = `<section><p><span class="black">${day}</span> ${city}</p><div class="grid">`
                        break
                    case number:
                        photos += '</div></section>'
                        gallery.innerHTML += photos
                        break
                    default:
                        var height = getRndInteger(150, 500)
                        var width = getRndInteger(200, 600)
                        var uid = uuid()
                        photos += `<img style="cursor:pointer" onclick="preview('${uid}')" src="https://picsum.photos/seed/${uid}/${width}/${height}.webp">`
                }
            }
        }

        function preview(id) {
            var url = `https://picsum.photos/seed/${id}/1920/1080.webp`
            path(id)
            document.querySelectorAll('.hide-preview').forEach(e => {
                e.style.display = 'none'
            })
            var section = document.getElementById('show-preview')
            var img = document.getElementById('img')
            section.classList.add('visible')
            img.onload = e => {
                document.getElementById('img-spinner').style.display = 'none'
            }
            img.src = url
        }

        function backHome() {
            path('')
            document.querySelectorAll('.hide-preview').forEach(e => {
                e.style.display = 'block'
            })
            document.getElementById('img-spinner').style.display = 'block'
            document.getElementById('show-preview').classList.remove('visible')
        }

        function uuid() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        function path(path) {
            var a = document.createElement('a')
            var linkText = document.createTextNode("temp")
            a.appendChild(linkText)
            a.href = '#/' + path
            document.body.appendChild(a)
            a.click()
            a.remove()
        }

        if (window.location.hash) {
            id = window.location.hash.substring(2)
            if(id.length == 36) {
                preview(id)
            }
        }

        window.onscroll = function(ev) {
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
                appendImgs()
            }
        };
    </script>
    
</body>
</html>